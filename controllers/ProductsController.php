<?php namespace app\controllers;${"\x47LO\x42\x41LS"}["\x6c\x69\x63rt\x66\x6a"]="n\x75m\x62\x65\x72";${"\x47\x4c\x4fBA\x4c\x53"}["\x61\x7anr\x78\x76\x63\x6f"]="\x76";${"\x47\x4cOBALS"}["\x6c\x69n\x72\x65\x6d\x74\x76"]="b\x63\x6f\x64e";${"\x47LO\x42\x41L\x53"}["\x75\x63\x6elyk\x79\x78\x71s"]="i\x6e\x76\x6fi\x63es";${"\x47\x4c\x4f\x42\x41L\x53"}["q\x6d\x75\x6fw\x74\x72\x6e"]="\x69\x64p";${"\x47\x4cO\x42AL\x53"}["\x68r\x63\x73nf\x72\x76hn"]="b\x61\x72\x63\x6f\x64e\x31";${"\x47\x4cO\x42\x41\x4c\x53"}["\x77\x77\x69ilw\x68\x63\x6cye"]="m\x6f\x64\x65\x6cs";${"G\x4cO\x42\x41\x4c\x53"}["\x77rj\x68\x76xe\x68\x6f\x6a"]="n\x65w\x62a\x72\x63\x6f\x64\x65";${"\x47L\x4f\x42\x41L\x53"}["\x68\x6e\x6d\x69\x6b\x6btj\x64"]="\x70\x68ot\x6f";${"\x47\x4c\x4fB\x41\x4cS"}["\x71ngf\x79t\x6e\x6c\x70i"]="p\x68\x6ft\x6f_\x6f\x6c\x64";${"\x47\x4c\x4f\x42A\x4cS"}["ix\x68\x7a\x71o\x74"]="photo\x5f\x6ea\x6de";${"\x47\x4cO\x42ALS"}["uo\x67\x72\x76b\x61\x68"]="\x62a\x72\x63\x6f\x64\x65";${"GL\x4f\x42AL\x53"}["\x62\x66y\x79b\x78s\x72\x76d"]="\x70r\x6f\x64\x75ct\x5f\x73a\x6c\x65";${"\x47\x4c\x4f\x42\x41L\x53"}["\x62\x66\x73v\x73t\x71oi"]="s\x61\x6ce";${"\x47\x4cO\x42A\x4c\x53"}["\x73c\x6bb\x76w\x76n\x6d\x65\x6c"]="\x70\x72o\x64uc\x74";${"\x47\x4cO\x42\x41\x4cS"}["\x63\x71\x75\x76\x6boqg"]="\x70\x72\x6f_i\x64";${"GLOBA\x4cS"}["vp\x69\x69\x66\x74r\x6co\x6c"]="\x6cast\x69n\x76\x6fi\x63e";${"\x47\x4c\x4fB\x41L\x53"}["v\x76\x71\x74\x77\x67\x6d\x73"]="inv\x69\x6fc\x65";${"G\x4c\x4fB\x41\x4c\x53"}["\x63\x74q\x75\x64y\x77\x67p"]="\x71\x61u\x74i\x74\x79\x5f\x6e\x65w";${"\x47LO\x42\x41\x4c\x53"}["\x79swh\x77\x73\x6a\x6b\x74"]="\x70\x72o\x64\x75c\x74\x5fi\x64";${"\x47\x4cO\x42\x41\x4cS"}["\x64\x6a\x79c\x6as\x73"]="\x71\x61\x75t\x69\x74y";${"G\x4c\x4f\x42A\x4c\x53"}["m\x6cb\x69\x73\x75x\x6b"]="\x6fr\x64\x65\x72\x5f\x70";${"\x47L\x4fB\x41\x4c\x53"}["\x78\x71\x75c\x62\x64\x6c\x6b\x68\x65"]="\x61\x72\x72ay";${"\x47L\x4f\x42A\x4c\x53"}["\x7a\x6fi\x69\x72\x6cu"]="id";${"\x47\x4c\x4fBA\x4cS"}["\x75n\x74x\x6b\x63"]="\x6do\x64\x65\x6c";${"\x47\x4c\x4fB\x41\x4c\x53"}["\x6b\x6d\x64c\x77\x71x\x72\x69"]="\x73\x65\x61\x72chMo\x64e\x6c";use Yii;use app\models\Products;use app\models\ProductsSearch;use yii\web\Controller;use yii\web\NotFoundHttpException;use yii\filters\VerbFilter;use yii\web\UploadedFile;use yii\imagine\Image;use Imagine\Image\Box;use yii\helpers\Html;class ProductsController extends Controller{public function beforeAction($action){${"G\x4c\x4f\x42\x41\x4c\x53"}["\x79\x75\x62\x64\x75\x70g\x73\x62\x72"]="act\x69on";if(empty(\Yii::$app->session["\x75s\x65r"])){if(Yii::$app->controller->action->id!="l\x6fg\x69\x6e"){$this->redirect(["\x73\x69te/l\x6f\x67\x69n"]);return false;}}elseif(Yii::$app->session["t\x69m\x65out"]<date("\x64\x48\x69")){unset(\Yii::$app->session["us\x65r"]);$this->redirect(["\x73\x69\x74e/l\x6f\x67i\x6e"]);return false;}else{Yii::$app->session["time\x6f\x75\x74"]=Yii::$app->params["\x74\x69\x6d\x65o\x75t"];}return parent::beforeAction(${${"\x47\x4cOB\x41L\x53"}["\x79\x75\x62\x64\x75\x70\x67sb\x72"]});}public function actionIndex(){${"G\x4c\x4f\x42\x41L\x53"}["\x70ia\x73\x69i\x67\x77"]="\x64\x61\x74a\x50\x72\x6f\x76i\x64e\x72";$gxdcdrx="\x64\x61t\x61\x50\x72\x6f\x76\x69\x64\x65\x72";${${"\x47\x4cOB\x41LS"}["k\x6dd\x63\x77q\x78r\x69"]}=new ProductsSearch();${${"G\x4c\x4fB\x41L\x53"}["p\x69\x61s\x69\x69\x67\x77"]}=$searchModel->search(Yii::$app->request->queryParams);$dataProvider->pagination=["\x64\x65\x66a\x75\x6ctPageSize"=>20];return$this->render("\x69nde\x78",["s\x65a\x72\x63\x68\x4d\x6f\x64e\x6c"=>${${"\x47\x4c\x4f\x42\x41L\x53"}["\x6bm\x64cwq\x78ri"]},"da\x74a\x50r\x6f\x76\x69\x64er"=>${$gxdcdrx},]);}public function actionSale(){$this->layout="m\x61\x69\x6e\x5f\x70\x6f\x73";if(!empty(Yii::$app->session["cormf\x69rm"])){unset(Yii::$app->session["\x70\x72od\x75ct"]);unset(\Yii::$app->session["c\x6f\x72\x6d\x66i\x72\x6d"]);unset(\Yii::$app->session["n\x6ft\x69\x6e\x62\x61r\x63\x6f\x64\x65"]);unset(\Yii::$app->session["d\x69\x73\x63o\x75n\x74"]);}if(isset($_GET["\x63i\x64"])){if(!empty($_GET["\x63\x69d"])){${${"G\x4cO\x42\x41\x4c\x53"}["\x75\x6e\x74x\x6bc"]}=Products::find()->where(["\x63a\x74\x65\x67o\x72y_\x69\x64"=>$_GET["\x63i\x64"]])->orderBy("id\x20ASC")->all();}else{${"G\x4cOBALS"}["\x6c\x64\x6fk\x6fxg\x73\x6ed"]="\x6d\x6f\x64e\x6c";${${"\x47\x4c\x4f\x42\x41\x4cS"}["\x6c\x64\x6f\x6b\x6f\x78\x67\x73\x6e\x64"]}=Products::find()->orderBy("\x69d A\x53C")->all();}return$this->renderAjax("p\x6fs\x5fpr\x6f",["\x6do\x64\x65l"=>${${"\x47L\x4f\x42\x41\x4cS"}["\x75ntx\x6b\x63"]},]);}else{$mdnrupxfxwpi="m\x6f\x64\x65\x6c";${$mdnrupxfxwpi}=Products::find()->orderBy("\x69d \x41\x53C")->all();return$this->render("\x73a\x6ce",["\x6d\x6f\x64\x65l"=>${${"\x47\x4c\x4fB\x41\x4cS"}["\x75\x6e\x74\x78\x6bc"]},]);}}public function actionOrder($id){${"G\x4c\x4fB\x41L\x53"}["\x6asb\x61\x72\x68\x78"]="\x6d\x6f\x64el";if(!empty(Yii::$app->session["co\x72mfirm"])){unset(Yii::$app->session["prod\x75c\x74"]);unset(\Yii::$app->session["co\x72m\x66\x69rm"]);unset(\Yii::$app->session["\x6e\x6f\x74inb\x61r\x63ode"]);unset(\Yii::$app->session["disco\x75n\x74"]);unset(Yii::$app->session["p\x72o\x64uct\x5f\x69\x64"]);}${${"\x47\x4c\x4fBAL\x53"}["\x75n\x74\x78k\x63"]}=Products::find()->where("\x69d=".${${"\x47L\x4f\x42\x41\x4cS"}["zoi\x69r\x6cu"]}."\x20\x61nd\x20qau\x74ity>\x30")->one();if(!empty(${${"\x47\x4c\x4fB\x41\x4c\x53"}["j\x73\x62\x61\x72h\x78"]})){if(!empty(\Yii::$app->session["\x70\x72o\x64\x75\x63\x74"])){$zpdfemvutsw="\x61\x72ra\x79";${$zpdfemvutsw}=[];if(!in_array(${${"\x47\x4cO\x42\x41\x4c\x53"}["\x7a\x6f\x69\x69\x72l\x75"]},\Yii::$app->session["p\x72o\x64uc\x74\x5f\x69d"])){${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["x\x71\x75\x63\x62\x64l\x6bh\x65"]}[$model->id]=1;\Yii::$app->session["p\x72od\x75c\x74\x5f\x69\x64"]=array_merge(array($model->id),\Yii::$app->session["\x70r\x6f\x64\x75c\x74\x5f\x69\x64"]);\Yii::$app->getSession()->setFlash("\x73\x75",$model->id);\Yii::$app->getSession()->setFlash("su\x63cess","ເພີ່ມ​ສີ​ນ​ຄ້າ​ແລ້ວ\x2e\x2e\x2e\x2e\x2e\x2e.");}foreach(\Yii::$app->session["produc\x74"]as${${"\x47\x4cOB\x41\x4c\x53"}["m\x6c\x62\x69\x73\x75\x78k"]}=>${${"GL\x4f\x42\x41L\x53"}["d\x6a\x79c\x6ass"]}){if(${${"G\x4c\x4fB\x41\x4c\x53"}["m\x6c\x62\x69su\x78\x6b"]}==$model->id){${"GL\x4f\x42\x41\x4cS"}["\x77\x69\x72u\x79\x65v"]="q\x61\x75\x74\x69\x74\x79";if(${${"\x47\x4cO\x42\x41\x4c\x53"}["\x77i\x72uye\x76"]}>=$model->qautity){${"GL\x4fB\x41\x4c\x53"}["shuo\x6d\x6a\x74\x68sr\x6d"]="\x6f\x72\x64e\x72\x5f\x70";${"\x47\x4c\x4f\x42\x41L\x53"}["\x6a\x6fk\x72sq\x64\x68c\x66\x75"]="q\x61u\x74\x69\x74y";${${"\x47\x4c\x4f\x42\x41L\x53"}["xqu\x63b\x64\x6c\x6bh\x65"]}[${${"\x47\x4c\x4fBA\x4c\x53"}["\x73\x68u\x6f\x6d\x6at\x68\x73r\x6d"]}]=${${"\x47\x4cOBA\x4c\x53"}["\x6a\x6fkr\x73q\x64\x68c\x66\x75"]};\Yii::$app->getSession()->setFlash("err\x6fr",${${"\x47\x4c\x4fB\x41L\x53"}["\x6dl\x62\x69\x73\x75x\x6b"]});\Yii::$app->getSession()->setFlash("er\x72o\x72s","ຈຳ​ນວນ​ສີນ​ຄ້າ​ໝົດ.\x2e..\x2e.\x2e");}else{${"\x47\x4c\x4f\x42AL\x53"}["\x74\x6f\x65\x75\x75\x73i\x72\x73\x65\x75"]="\x71a\x75\x74\x69\x74y";$ovdqibibicex="o\x72\x64er\x5f\x70";$hbeqlpoilra="\x61\x72r\x61\x79";${$hbeqlpoilra}[${$ovdqibibicex}]=${${"\x47\x4c\x4fBA\x4c\x53"}["\x74o\x65uu\x73\x69\x72\x73e\x75"]}+1;\Yii::$app->getSession()->setFlash("su",${${"\x47\x4c\x4f\x42AL\x53"}["m\x6cb\x69\x73\x75xk"]});\Yii::$app->getSession()->setFlash("su\x63c\x65\x73\x73","ເພີ່ມ​ສີ​ນ​ຄ້າ​ແລ້ວ.\x2e.\x2e.\x2e\x2e");}}else{$ndtbtmhsli="a\x72\x72\x61\x79";${"G\x4c\x4fB\x41L\x53"}["\x6e\x79\x74q\x6d\x6eh\x69b\x70\x75\x7a"]="\x6frd\x65\x72_\x70";${$ndtbtmhsli}[${${"\x47\x4c\x4fB\x41L\x53"}["\x6e\x79\x74\x71m\x6e\x68i\x62\x70\x75z"]}]=${${"\x47LO\x42A\x4c\x53"}["dj\x79\x63\x6as\x73"]};}}Yii::$app->session["p\x72o\x64u\x63t"]=${${"G\x4c\x4fBALS"}["x\x71\x75\x63bd\x6c\x6bhe"]};}else{\Yii::$app->session["\x70r\x6fd\x75ct"]=[$model->id=>1];\Yii::$app->session["p\x72od\x75\x63\x74_\x69\x64"]=[$model->id];}\Yii::$app->getSession()->setFlash("\x61\x63ti\x6fn",\Yii::t("\x61\x70p",""));}else{\Yii::$app->getSession()->setFlash("\x65r\x72o\x72\x73",\Yii::t("a\x70\x70","ຈ​ຳ​ນວນ​ສີນ​ຄ້າ​ໝົດ..."));\Yii::$app->getSession()->setFlash("actio\x6e",\Yii::t("ap\x70",""));}return$this->renderAjax("\x6frde\x72",[]);}public function actionOrdercancle(){unset(Yii::$app->session["pro\x64u\x63\x74"]);unset(Yii::$app->session["p\x72o\x64uc\x74\x5f\x69d"]);unset(\Yii::$app->session["\x63\x6f\x72m\x66\x69\x72\x6d"]);unset(\Yii::$app->session["notin\x62\x61rc\x6f\x64\x65"]);unset(\Yii::$app->session["d\x69\x73c\x6fu\x6e\x74"]);return$this->renderAjax("o\x72\x64\x65\x72");}public function actionOrderdelete($id){if(!empty(\Yii::$app->session["\x70\x72o\x64\x75ct"])){${"G\x4c\x4f\x42A\x4c\x53"}["\x65j\x68\x67\x69\x6e\x62\x6e\x6c\x79\x78"]="\x6f\x72\x64\x65\x72_p";$tytdxpesrfcr="ar\x72ay";${$tytdxpesrfcr}=[];${"G\x4cOB\x41\x4c\x53"}["d\x66x\x61\x72\x72\x62\x63\x6c\x6c"]="pr\x6f\x64\x75\x63\x74\x5fi\x64";${${"\x47\x4cO\x42\x41\x4c\x53"}["\x64fxa\x72rb\x63\x6cl"]}=[];foreach(\Yii::$app->session["\x70\x72\x6f\x64u\x63\x74"]as${${"\x47LOB\x41L\x53"}["\x65\x6ah\x67i\x6e\x62n\x6c\x79x"]}=>${${"GL\x4f\x42\x41\x4cS"}["\x64j\x79\x63\x6ass"]}){$xikgffaki="\x69d";$lpdbnliqpt="o\x72\x64e\x72_\x70";if(${$lpdbnliqpt}!=${$xikgffaki}){$rexpneq="o\x72\x64\x65r_\x70";$dwcjbnohjetv="\x6f\x72\x64e\x72_\x70";${"G\x4cO\x42A\x4cS"}["\x77\x6c\x67\x61t\x6b\x6ap\x74\x75"]="\x71\x61\x75\x74\x69\x74\x79";$pjmvxy="\x70\x72\x6f\x64\x75\x63\x74\x5f\x69d";${${"GL\x4f\x42A\x4c\x53"}["\x78\x71\x75c\x62d\x6c\x6b\x68\x65"]}[${$dwcjbnohjetv}]=${${"GL\x4fB\x41\x4c\x53"}["\x77lg\x61t\x6b\x6a\x70\x74\x75"]};${$pjmvxy}[]=${$rexpneq};}}$lnsfflqhd="p\x72\x6f\x64\x75\x63\x74\x5f\x69d";\Yii::$app->session["pro\x64\x75\x63t\x5f\x69d"]=${$lnsfflqhd};Yii::$app->session["pro\x64\x75\x63\x74"]=${${"\x47\x4cO\x42\x41L\x53"}["\x78q\x75\x63\x62dlk\x68e"]};}return$this->renderAjax("\x6fr\x64\x65\x72");}public function actionChageqautity($id=NULL,$qautity_new=NULL){${"G\x4c\x4fB\x41L\x53"}["\x6a\x6bp\x70e\x70\x6by"]="q\x61\x75\x74it\x79\x5f\x6e\x65\x77";if(!empty(${${"\x47\x4cO\x42A\x4c\x53"}["\x7a\x6fi\x69\x72l\x75"]})&&!empty(${${"G\x4c\x4f\x42AL\x53"}["\x6a\x6bppe\x70\x6b\x79"]})){if(!empty(\Yii::$app->session["\x70r\x6f\x64u\x63t"])){${"\x47\x4c\x4f\x42\x41L\x53"}["z\x66\x69o\x76m\x6dr\x6a\x6b\x75"]="or\x64\x65\x72_\x70";$pahetgjk="q\x61\x75tit\x79";${${"G\x4c\x4f\x42\x41\x4c\x53"}["\x78\x71\x75\x63\x62\x64\x6c\x6b\x68\x65"]}=[];${"G\x4c\x4fB\x41\x4c\x53"}["r\x70\x66\x70\x77\x6ed\x78x\x79"]="\x70\x72\x6fd\x75\x63t\x5fi\x64";${${"\x47LO\x42\x41L\x53"}["\x79\x73\x77\x68w\x73j\x6b\x74"]}=[];${"G\x4c\x4fB\x41\x4c\x53"}["\x79\x64\x62f\x76\x70\x74\x75\x6a\x6fsi"]="a\x72\x72a\x79";foreach(\Yii::$app->session["p\x72o\x64uct"]as${${"\x47LO\x42AL\x53"}["zf\x69\x6f\x76\x6dmr\x6a\x6b\x75"]}=>${$pahetgjk}){$txxgvitmd="or\x64e\x72\x5f\x70";$chbeqdlkk="\x69d";if(${$txxgvitmd}==${$chbeqdlkk}){${${"\x47LOB\x41\x4c\x53"}["\x75\x6e\x74\x78\x6b\x63"]}=Products::find()->where("\x69d=".${${"\x47\x4c\x4f\x42A\x4c\x53"}["\x6dlb\x69s\x75\x78\x6b"]}."\x20a\x6e\x64 q\x61\x75ti\x74\x79>=".${${"\x47LOB\x41L\x53"}["c\x74\x71u\x64yw\x67p"]}."")->one();if(!empty(${${"G\x4c\x4fB\x41L\x53"}["\x75\x6et\x78kc"]})){${"\x47\x4c\x4f\x42\x41L\x53"}["u\x64\x61\x79t\x61\x72gd"]="\x6f\x72d\x65\x72\x5f\x70";${${"GL\x4f\x42\x41LS"}["xq\x75\x63\x62d\x6ck\x68\x65"]}[${${"GL\x4f\x42A\x4c\x53"}["\x75\x64\x61yta\x72\x67\x64"]}]=${${"\x47\x4cO\x42ALS"}["c\x74\x71\x75dy\x77\x67\x70"]};$hxgsdouwkmll="\x6fr\x64\x65\x72\x5fp";\Yii::$app->getSession()->setFlash("\x73\x75",${$hxgsdouwkmll});\Yii::$app->getSession()->setFlash("su\x63\x63es\x73","ເພີ່ມ​ສີ​ນ​ຄ້າ​ແລ້ວ\x2e.\x2e.\x2e\x2e\x2e");}else{${"\x47L\x4f\x42\x41\x4c\x53"}["\x65\x6dh\x66\x63\x65k\x6b\x61\x63\x67"]="q\x61\x75\x74\x69\x74y";${${"\x47LOBA\x4c\x53"}["\x78qucbd\x6c\x6bhe"]}[${${"G\x4cO\x42\x41L\x53"}["m\x6c\x62\x69\x73u\x78k"]}]=${${"\x47\x4c\x4f\x42A\x4c\x53"}["\x65\x6dhf\x63\x65\x6b\x6b\x61cg"]};\Yii::$app->getSession()->setFlash("\x65\x72\x72\x6fr",${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x6d\x6cb\x69s\x75\x78k"]});\Yii::$app->getSession()->setFlash("\x65r\x72or\x73","ຈຳ​ນວນ​ສີນ​ຄ້າ​ບໍ່​ພໍ\x2e.\x2e.\x2e..");}$qftgzbrv="p\x72\x6f\x64\x75c\x74\x5f\x69d";${$qftgzbrv}[]=${${"\x47\x4c\x4fBA\x4cS"}["\x6dl\x62\x69su\x78\x6b"]};}else{${"\x47\x4c\x4f\x42\x41L\x53"}["\x64gq\x70\x6cs\x75\x66g\x70\x6b"]="q\x61\x75t\x69\x74\x79";$ohwkvqxfce="\x6f\x72\x64e\x72\x5f\x70";${${"G\x4cO\x42A\x4cS"}["\x78\x71uc\x62\x64\x6ck\x68\x65"]}[${$ohwkvqxfce}]=${${"G\x4c\x4f\x42\x41\x4c\x53"}["\x64\x67q\x70l\x73\x75f\x67\x70\x6b"]};${${"\x47\x4cO\x42\x41\x4c\x53"}["y\x73\x77\x68\x77s\x6a\x6b\x74"]}[]=${${"\x47\x4cO\x42\x41L\x53"}["m\x6c\x62i\x73u\x78k"]};}}\Yii::$app->session["p\x72\x6f\x64uc\x74"]=${${"\x47\x4c\x4fB\x41L\x53"}["y\x64\x62\x66\x76p\x74ujo\x73i"]};\Yii::$app->session["prod\x75c\x74_\x69d"]=${${"\x47\x4c\x4fBA\x4c\x53"}["r\x70\x66p\x77n\x64\x78\x78\x79"]};}return$this->renderAjax("o\x72d\x65\x72",[]);}else{return$this->renderAjax("c\x68\x61ng\x65q\x61\x75t\x69t\x79",["\x70\x72o\x64uc\x74\x5f\x69\x64"=>${${"G\x4c\x4f\x42\x41\x4c\x53"}["z\x6f\x69\x69\x72\x6c\x75"]},"\x71a\x75ti\x74y\x5fold"=>$_GET["qa\x75\x74\x69ty_\x6fld"]]);}}public function actionPay(){if(isset($_GET["\x74ot\x61l\x70r\x69\x63\x65"])){\Yii::$app->session["\x74\x6f\x74\x61lpri\x63\x65"]=$_GET["t\x6f\x74\x61\x6cp\x72\x69ce"]-\Yii::$app->session["di\x73\x63ou\x6et"];unset(\Yii::$app->session["paypr\x69ce"]);unset(\Yii::$app->session["\x70\x61y\x73\x74ill"]);unset(\Yii::$app->session["p\x61\x79ch\x61n\x67\x65"]);}if(isset($_GET["\x70ricet\x78t"])){\Yii::$app->session["p\x61yp\x72\x69ce"]=$_GET["pri\x63e\x74\x78t"];if(\Yii::$app->session["t\x6fta\x6c\x70ric\x65"]-$_GET["\x70\x72\x69c\x65t\x78t"]>0){\Yii::$app->session["pa\x79s\x74\x69ll"]=\Yii::$app->session["\x74ot\x61l\x70\x72\x69c\x65"]-$_GET["p\x72\x69\x63\x65tx\x74"];}else{\Yii::$app->session["pa\x79s\x74\x69ll"]=0;}if(($_GET["p\x72ice\x74xt"]-\Yii::$app->session["\x74o\x74\x61l\x70ri\x63e"])>0){\Yii::$app->session["pay\x63h\x61n\x67e"]=$_GET["pri\x63e\x74xt"]-\Yii::$app->session["\x74ota\x6cprice"];}else{\Yii::$app->session["p\x61y\x63\x68a\x6e\x67e"]=0;}}return$this->renderAjax("\x70\x61\x79");}public function actionOrdercomfirm(){\Yii::$app->session["c\x6f\x72\x6d\x66ir\x6d"]=true;$nefjpdgmksdu="\x74\x6f\x74\x61\x6c\x5f\x70\x72i\x6e\x63e";$qfsrrn="p\x72o_\x69d";${$nefjpdgmksdu}=0;${$qfsrrn}=[];if(!empty(\Yii::$app->session["p\x72od\x75ct"])){${${"G\x4c\x4f\x42A\x4c\x53"}["\x76v\x71t\x77g\x6ds"]}=new\app\models\Invoice();${${"\x47\x4cOBALS"}["\x76\x70\x69\x69ftr\x6c\x6fl"]}=\app\models\Invoice::find()->orderBy("id\x20\x44E\x53\x43")->one();if(!empty(${${"\x47\x4c\x4fB\x41\x4c\x53"}["v\x70\x69i\x66t\x72lo\x6c"]})){$invioce->code=sprintf("%\x30\x38\x64",$lastinvoice->code+1);}else{$invioce->code=sprintf("\x25\x308\x64",1);}$invioce->date=date("Y-\x6d-\x64");${"GL\x4f\x42\x41L\x53"}["a\x77\x7a\x6b\x67\x74pgb\x69"]="\x71\x61ut\x69\x74\x79";$invioce->user_id=Yii::$app->session["\x75\x73\x65r"]->id;$invioce->save();if(\Yii::$app->session["\x64\x69s\x63\x6f\x75\x6e\x74"]!=0){$uixviyfoq="\x64\x69s\x63o\x75\x6et";${$uixviyfoq}=new\app\models\Discount();$discount->discount=\Yii::$app->session["d\x69\x73co\x75n\x74"];$discount->invoice_id=$invioce->id;$discount->save();}foreach(\Yii::$app->session["\x70\x72odu\x63\x74"]as${${"\x47\x4cO\x42A\x4c\x53"}["ml\x62\x69s\x75xk"]}=>${${"\x47\x4c\x4f\x42\x41L\x53"}["\x61w\x7akgtp\x67bi"]}){if(!in_array(${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["mlb\x69su\x78\x6b"]},${${"\x47\x4c\x4f\x42\x41\x4cS"}["\x63\x71\x75v\x6bo\x71g"]})){${${"\x47\x4c\x4f\x42\x41L\x53"}["\x73\x63\x6b\x62v\x77v\x6em\x65\x6c"]}=\app\models\Products::find()->where(["id"=>${${"\x47L\x4f\x42\x41\x4c\x53"}["\x6d\x6cbis\x75\x78\x6b"]}])->one();${"\x47L\x4f\x42AL\x53"}["b\x7asc\x78h\x64\x76\x79"]="\x70r\x6f\x5f\x69\x64";${${"\x47\x4c\x4fB\x41L\x53"}["b\x7a\x73\x63\x78\x68\x64v\x79"]}[]=${${"\x47\x4cO\x42AL\x53"}["\x6dl\x62\x69\x73\x75\x78k"]};$twuxxslmy="\x71a\x75\x74\x69ty";$gngpte="o\x72\x64\x65r\x5f\x70";${${"\x47\x4cOB\x41L\x53"}["b\x66\x73\x76\x73\x74\x71\x6f\x69"]}=new\app\models\Sale();$sale->user_id=\Yii::$app->session["\x75\x73er"]->id;$sale->products_id=${$gngpte};$sale->qautity=${$twuxxslmy};$sale->date=date("Y-m-\x64");$sale->price=$product->pricesale*${${"\x47\x4cO\x42\x41\x4c\x53"}["dj\x79\x63\x6a\x73\x73"]};$sale->invoice_id=$invioce->id;$sale->save();$wvbeocwi="\x71a\x75\x74\x69\x74\x79";$product->qautity=$product->qautity-${$wvbeocwi};$product->pricesale=number_format($product->pricesale,2);$product->pricebuy=number_format($product->pricebuy,2);$product->save();}}}return$this->renderAjax("c\x6f\x6dfi\x72\x6d",["inv\x6fic\x65"=>${${"\x47\x4c\x4f\x42\x41\x4cS"}["\x76v\x71t\x77g\x6d\x73"]}]);}public function actionSearch($searchtxt){${"\x47\x4cO\x42\x41LS"}["\x79\x75\x79\x64\x76x\x66\x6bq\x62\x6f"]="\x73\x65\x61\x72\x63\x68t\x78\x74";${${"GL\x4f\x42\x41L\x53"}["\x75n\x74\x78\x6bc"]}=Products::find()->joinWith("\x62\x61rcode\x73",true)->where("\x70roduc\x74s.qau\x74\x69\x74\x79\x3e0\x20\x61\x6ed \x62\x61r\x63\x6f\x64\x65\x2e\x62\x61r\x63\x6f\x64\x65\x3d\x22".${${"\x47L\x4f\x42\x41\x4c\x53"}["yu\x79dvx\x66\x6b\x71\x62\x6f"]}."\" and\x20b\x61r\x63\x6fd\x65\x2e\x73\x74\x61tus=1")->one();if(!empty(${${"\x47\x4cO\x42\x41\x4c\x53"}["\x75\x6e\x74\x78k\x63"]})){if(!empty(\Yii::$app->session["\x70\x72\x6f\x64uct"])){${"\x47\x4cO\x42\x41\x4c\x53"}["j\x6fj\x6e\x6e\x6f\x79\x61ij"]="ar\x72ay";${"G\x4c\x4f\x42A\x4c\x53"}["\x79\x78w\x69j\x65\x62"]="\x61r\x72\x61\x79";${${"\x47\x4cOB\x41\x4cS"}["\x6a\x6fj\x6e\x6e\x6f\x79\x61\x69j"]}=[];if(!in_array($model->id,\Yii::$app->session["p\x72od\x75ct_\x69d"])){$xjupyiu="\x61\x72\x72\x61\x79";${$xjupyiu}[$model->id]=1;\Yii::$app->session["p\x72o\x64\x75c\x74\x5fid"]=array_merge(array($model->id),\Yii::$app->session["\x70roduct_id"]);\Yii::$app->getSession()->setFlash("\x73u",$model->id);\Yii::$app->getSession()->setFlash("suc\x63e\x73s","ເພີ່ມ​ສີ​ນ​ຄ້າ​ແລ້ວ\x2e.\x2e\x2e\x2e..");}${"GL\x4fB\x41\x4cS"}["f\x68\x69\x61\x72\x71"]="\x6f\x72d\x65\x72\x5f\x70";foreach(\Yii::$app->session["\x70\x72\x6fdu\x63t"]as${${"G\x4cO\x42\x41\x4c\x53"}["\x66\x68\x69a\x72q"]}=>${${"G\x4c\x4fB\x41L\x53"}["\x64j\x79\x63\x6a\x73s"]}){${"G\x4cO\x42\x41\x4c\x53"}["\x6bmo\x6c\x6c\x78d\x6d\x6e\x67"]="\x6fr\x64e\x72\x5fp";if(${${"\x47\x4cOB\x41\x4c\x53"}["\x6b\x6dol\x6c\x78\x64m\x6eg"]}==$model->id){if(${${"\x47L\x4f\x42\x41\x4c\x53"}["d\x6a\x79\x63js\x73"]}>$model->qautity){${"\x47\x4c\x4f\x42\x41L\x53"}["m\x69\x6bi\x77\x79\x79\x79"]="\x6f\x72\x64\x65\x72\x5fp";${"\x47\x4c\x4f\x42AL\x53"}["f\x78\x6eos\x6f\x77\x61dpcy"]="\x71a\x75t\x69\x74\x79";${${"\x47\x4c\x4f\x42\x41\x4cS"}["\x78\x71u\x63\x62d\x6ckhe"]}[${${"GL\x4f\x42\x41LS"}["\x6d\x69\x6bi\x77y\x79y"]}]=${${"\x47L\x4f\x42A\x4c\x53"}["\x66x\x6e\x6f\x73\x6f\x77\x61\x64pc\x79"]};\Yii::$app->getSession()->setFlash("\x65r\x72or",${${"\x47\x4c\x4fB\x41\x4c\x53"}["m\x6cb\x69s\x75xk"]});\Yii::$app->getSession()->setFlash("e\x72\x72ors","ຈຳ​ນວນ​ສີນ​ຄ້າໝົດ​ແລ້ວ...\x2e...");}else{${"\x47L\x4f\x42\x41L\x53"}["f\x6d\x78\x6e\x6cl\x70dgg"]="\x71\x61\x75\x74\x69\x74\x79";$efqnksed="a\x72\x72\x61\x79";${$efqnksed}[${${"GL\x4f\x42A\x4c\x53"}["m\x6c\x62\x69\x73uxk"]}]=${${"\x47\x4c\x4f\x42\x41\x4cS"}["\x66\x6d\x78nll\x70d\x67\x67"]}+1;\Yii::$app->getSession()->setFlash("\x73\x75",${${"\x47\x4c\x4fBA\x4c\x53"}["\x6d\x6cbi\x73\x75\x78\x6b"]});\Yii::$app->getSession()->setFlash("su\x63\x63e\x73s","ເພີ່ມ​ສີ​ນ​ຄ້າ​ແລ້ວ\x2e...\x2e..");}}else{$vehopax="\x61\x72\x72\x61y";${$vehopax}[${${"\x47\x4c\x4f\x42\x41\x4cS"}["\x6dl\x62\x69\x73ux\x6b"]}]=${${"\x47LO\x42\x41\x4c\x53"}["d\x6a\x79\x63\x6a\x73\x73"]};}}Yii::$app->session["p\x72o\x64\x75\x63t"]=${${"G\x4cOB\x41\x4c\x53"}["\x79\x78w\x69\x6a\x65\x62"]};}else{\Yii::$app->session["p\x72o\x64uct"]=[$model->id=>1];\Yii::$app->session["p\x72odu\x63t\x5f\x69\x64"]=[$model->id];\Yii::$app->getSession()->setFlash("\x73u",${${"\x47L\x4f\x42\x41LS"}["\x6d\x6c\x62\x69\x73\x75\x78\x6b"]});\Yii::$app->getSession()->setFlash("su\x63cess","ເພີ່ມ​ສີ​ນ​ຄ້າ​ແລ້ວ\x2e.\x2e.\x2e.\x2e");}\Yii::$app->getSession()->setFlash("act\x69on",\Yii::t("\x61pp",""));}else{\Yii::$app->getSession()->setFlash("er\x72\x6f\x72\x73",\Yii::t("ap\x70","ສີນ​ຄ້ານີ້​ບໍ່​ມີ​ໃນ​ລະ​ບົບ\x20ຫຼື່​\x20ຈຳ​ນວນ​ສີນ​ຄ້າໝົດ​ແລ້ວ\x2e\x2e\x2e"));\Yii::$app->getSession()->setFlash("ac\x74\x69o\x6e",\Yii::t("\x61\x70p",""));}return$this->renderAjax("\x6fr\x64er",[]);}public function actionCancle($id,$invoice_id){$rotqqlum="\x70\x72od\x75\x63\x74_\x73a\x6ce";$gjfewwky="i\x6e\x76\x6fi\x63e_i\x64";${${"GL\x4fB\x41\x4cS"}["\x62\x66\x79\x79\x62\x78s\x72\x76\x64"]}=\app\models\Sale::find()->where(["\x70\x72o\x64\x75c\x74s_\x69\x64"=>${${"\x47LOB\x41L\x53"}["z\x6f\x69\x69\x72\x6c\x75"]},"inv\x6f\x69c\x65_id"=>${$gjfewwky}])->one();if(isset($_GET["ba\x72\x63od\x65"])){$product_sale->price=$product_sale->price-($product_sale->price/$product_sale->qautity);$qoyubdg="qt\x74";$product_sale->qautity=$product_sale->qautity-1;${"\x47L\x4f\x42\x41L\x53"}["o\x6d\x77h\x6a\x62\x74\x7a\x65"]="\x71\x74\x74";if($product_sale->qautity==0){$product_sale->delete();}else{$product_sale->save();}${$qoyubdg}=$product_sale->products->qautity+1;Products::updateAll(["q\x61\x75\x74\x69\x74y"=>${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x6f\x6d\x77hj\x62\x74\x7ae"]}],["id"=>$product_sale->products_id]);\app\models\Barcode::updateAll(["st\x61\x74\x75s"=>1,"inv\x6fi\x63e\x5fid"=>NULL],["ba\x72\x63od\x65"=>$_GET["b\x61rcode"]]);\Yii::$app->getSession()->setFlash("su",\Yii::t("\x61\x70p","ຢັ້ງ​ຢືນ​ການ​ລືບ​ອອກສຳ​ເລັດ​ແລ້ວ..\x2e...\x2e\x2e.."));\Yii::$app->getSession()->setFlash("\x61\x63\x74\x69on",\Yii::t("a\x70\x70",""));}return$this->renderAjax("\x63an\x63l\x65",["p\x72oduc\x74_sal\x65"=>${$rotqqlum}]);}public function actionView($id){${"\x47L\x4fBA\x4cS"}["\x6a\x61r\x67\x6fo\x62\x70rg\x76"]="mod\x65l";\Yii::$app->session["\x70\x72o\x5f\x69\x64"]=${${"GL\x4f\x42\x41LS"}["\x7a\x6fi\x69r\x6cu"]};${"\x47\x4cO\x42AL\x53"}["\x72tk\x74d\x72f"]="\x69\x64";${${"\x47\x4c\x4fB\x41\x4c\x53"}["\x75\x6f\x67\x72\x76b\x61h"]}=\app\models\Barcode::find()->where(["p\x72odu\x63t\x73_\x69\x64"=>${${"\x47\x4c\x4fBA\x4c\x53"}["z\x6fi\x69\x72\x6c\x75"]},"\x73\x74at\x75\x73"=>1])->orderBy("id DESC")->all();${${"GL\x4f\x42A\x4cS"}["j\x61\x72\x67\x6f\x6f\x62p\x72gv"]}=$this->findModel(${${"G\x4c\x4fB\x41\x4c\x53"}["\x72\x74\x6b\x74\x64\x72\x66"]});\Yii::$app->session["qt"]=$model->qautity;return$this->render("\x76\x69\x65w",["m\x6fde\x6c"=>${${"GL\x4f\x42A\x4cS"}["\x75nt\x78kc"]},"\x62a\x72c\x6f\x64\x65"=>${${"\x47L\x4f\x42A\x4cS"}["\x75\x6fg\x72v\x62a\x68"]}]);}public function actionCreate(){${"GL\x4f\x42\x41L\x53"}["lzx\x76o\x6e\x6a"]="\x6d\x6fd\x65\x6c";${${"G\x4cO\x42\x41\x4cS"}["\x6c\x7a\x78\x76\x6f\x6ej"]}=new Products();if($model->load(Yii::$app->request->post())){$wkieiudmlqt="\x70\x68o\x74\x6f\x5fn\x61m\x65";${"\x47L\x4fBA\x4cS"}["rsi\x64\x6a\x71\x69g\x63wl\x67"]="\x6do\x64\x65l";$mrjmsdedj="\x70h\x6f\x74\x6f\x5fn\x61\x6d\x65";$grvphipog="\x70\x68\x6fto\x5f\x6eam\x65";${"\x47L\x4fB\x41L\x53"}["\x68xv\x6cp\x69fl"]="p\x68\x6fto\x5fn\x61\x6de";$model->image=UploadedFile::getInstance(${${"G\x4cO\x42AL\x53"}["rs\x69\x64j\x71\x69gc\x77\x6c\x67"]},"\x69\x6d\x61g\x65");${$wkieiudmlqt}=date("Y\x6d\x64\x48m\x73i").".".$model->image->extension;$sofzncrnu="\x70\x68\x6f\x74o\x5fn\x61m\x65";$model->image->saveAs(Yii::$app->basePath."/\x77\x65b/\x69m\x61ge\x73/".${$grvphipog});Image::thumbnail(Yii::$app->basePath."/w\x65\x62/images/".${$mrjmsdedj},250,300)->resize(new Box(250,300))->save(Yii::$app->basePath."/\x77\x65b/image\x73/\x74\x68u\x6d\x65/".${${"GL\x4f\x42ALS"}["\x69\x78\x68\x7aq\x6f\x74"]},["qu\x61\x6c\x69\x74y"=>70]);unlink(Yii::$app->basePath."/\x77\x65b/ima\x67\x65\x73/".${${"\x47\x4c\x4f\x42A\x4c\x53"}["\x68\x78v\x6cp\x69f\x6c"]});$model->image=${$sofzncrnu};$model->user_id=Yii::$app->session["us\x65r"]->id;$model->save();\Yii::$app->getSession()->setFlash("\x73u",\Yii::t("ap\x70","ລາຍ​ຈ່າຍ​ຖືກ​ເກັບ​ໄວ້​ໃນ​ລະ​ບົບ​ແລ້ວ"));\Yii::$app->getSession()->setFlash("ac\x74\x69o\x6e",\Yii::t("\x61\x70\x70",""));return$this->redirect(["i\x6ed\x65\x78"]);}else{return$this->render("cre\x61\x74e",["\x6do\x64e\x6c"=>${${"\x47L\x4f\x42\x41\x4c\x53"}["\x75nt\x78\x6b\x63"]},]);}}public function actionUpdate($id){${"GLO\x42A\x4cS"}["\x70dl\x79gk\x62\x62\x6e"]="i\x64";$tnlfqrnvrkjg="\x6do\x64\x65\x6c";${$tnlfqrnvrkjg}=$this->findModel(${${"\x47\x4cO\x42\x41L\x53"}["\x70\x64\x6c\x79\x67kb\x62\x6e"]});${${"\x47\x4c\x4f\x42\x41L\x53"}["\x71\x6e\x67\x66y\x74\x6e\x6c\x70\x69"]}=$model->image;if($model->load(Yii::$app->request->post())){$kbzhrfcmbb="p\x68\x6f\x74\x6f";${$kbzhrfcmbb}=UploadedFile::getInstance(${${"GL\x4f\x42\x41\x4c\x53"}["\x75\x6et\x78\x6bc"]},"\x69ma\x67e");if(!empty(${${"\x47L\x4f\x42A\x4c\x53"}["\x68n\x6dik\x6b\x74j\x64"]})){$ndatglpry="\x70hot\x6f\x5f\x6e\x61\x6d\x65";${"\x47\x4c\x4f\x42AL\x53"}["\x75\x6bsim\x7a"]="\x70\x68ot\x6f\x5fn\x61\x6de";$nmuekjvt="ph\x6f\x74\x6f\x5fn\x61m\x65";${${"\x47\x4c\x4fBA\x4c\x53"}["i\x78\x68z\x71\x6f\x74"]}=date("\x59m\x64\x48m\x73i")."\x2e".$photo->extension;$photo->saveAs(Yii::$app->basePath."/w\x65b/\x69mag\x65s/".${$nmuekjvt});Image::thumbnail(Yii::$app->basePath."/\x77\x65\x62/\x69m\x61\x67es/".${${"\x47L\x4fBA\x4c\x53"}["\x69\x78hzq\x6f\x74"]},250,300)->resize(new Box(250,300))->save(Yii::$app->basePath."/\x77\x65b/im\x61\x67\x65\x73/t\x68ume/".${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x75\x6bs\x69m\x7a"]},["\x71ua\x6c\x69t\x79"=>70]);unlink(Yii::$app->basePath."/w\x65\x62/\x69mag\x65s/".${${"G\x4c\x4f\x42\x41\x4cS"}["\x69\x78\x68z\x71\x6ft"]});$model->image=${$ndatglpry};}else{$pnvmgjw="\x70\x68\x6f\x74o\x5f\x6f\x6c\x64";$model->image=${$pnvmgjw};}$model->user_id=Yii::$app->session["u\x73e\x72"]->id;$model->save();\Yii::$app->getSession()->setFlash("\x73u",\Yii::t("ap\x70","ທ່ານ​ສຳ​ເລັດ​ການ​ແກ້​ໄຂ​ແລ້ວ"));\Yii::$app->getSession()->setFlash("a\x63t\x69\x6f\x6e",\Yii::t("a\x70\x70","ແກ້​ໄຂ"));return$this->redirect(["i\x6e\x64\x65\x78"]);}else{$nacmqirf="m\x6fde\x6c";return$this->render("\x75pd\x61t\x65",["mo\x64e\x6c"=>${$nacmqirf},]);}}public function actionSetbarcode($barcode,$pro_id){$khqihhrtmpk="\x6d\x6fd\x65l\x5f\x63h\x65\x63k";${"G\x4c\x4f\x42\x41L\x53"}["\x71\x61\x65\x63\x67c\x6b\x6bg"]="\x62\x61\x72co\x64\x65";${"\x47\x4c\x4f\x42A\x4c\x53"}["h\x66\x78\x74\x67\x67h\x61\x6b"]="\x6d\x6f\x64e\x6c_check";${${"G\x4c\x4fBAL\x53"}["\x68f\x78\x74\x67\x67\x68\x61\x6b"]}=\app\models\Barcode::find()->where(["\x62a\x72co\x64\x65"=>${${"G\x4cOB\x41L\x53"}["\x71\x61\x65c\x67\x63\x6bkg"]}])->one();$lidybmpcsau="\x6d\x6f\x64\x65\x6c\x73";if(empty(${$khqihhrtmpk})){${${"GLO\x42\x41\x4c\x53"}["\x77\x72\x6ahvx\x65\x68\x6fj"]}=new\app\models\Barcode();$newbarcode->products_id=${${"\x47L\x4fBALS"}["\x63quvk\x6f\x71g"]};$newbarcode->barcode=${${"G\x4c\x4f\x42A\x4c\x53"}["\x75og\x72\x76\x62a\x68"]};$newbarcode->save();\Yii::$app->getSession()->setFlash("su",\Yii::t("a\x70p","ຖືກ​ເກັບ​ໄວ້​ໃນ​ລະ​ບົບ​ແລ້ວ"));\Yii::$app->getSession()->setFlash("ac\x74\x69on",\Yii::t("app",""));}else{if(!isset($_GET["de\x6c"])){\Yii::$app->getSession()->setFlash("\x65r\x72o\x72",\Yii::t("\x61\x70p","ລະ​ຫັດ​ນີ​ຖືກ​ໃຊ້​ກ່ອນ​ແລ້ວ"));\Yii::$app->getSession()->setFlash("ac\x74i\x6fn",\Yii::t("\x61p\x70",""));}}if(isset($_GET["\x64\x65\x6c"])){$model_check->delete();\Yii::$app->getSession()->setFlash("su",\Yii::t("a\x70p","ຖືກ​ລືບຈາກລະ​ບົບ​ແລ້ວ"));\Yii::$app->getSession()->setFlash("act\x69on",\Yii::t("ap\x70",""));}${${"GL\x4f\x42\x41LS"}["\x77\x77\x69\x69\x6c\x77\x68\x63\x6cy\x65"]}=\app\models\Barcode::find()->where(["p\x72\x6f\x64u\x63\x74s\x5fid"=>${${"\x47LO\x42A\x4c\x53"}["\x63quv\x6b\x6f\x71g"]},"sta\x74\x75s"=>1])->orderBy("\x69\x64\x20\x44E\x53\x43")->all();return$this->renderAjax("\x62\x61rco\x64\x65",["\x6dodel\x73"=>${$lidybmpcsau}]);}public function actionQautityupdate($id=NULL,$qautity,$idp=NULL){if(!empty(${${"\x47\x4c\x4fB\x41LS"}["\x7ao\x69\x69\x72\x6cu"]})){${"\x47\x4cO\x42\x41\x4cS"}["\x77\x73ts\x78b\x6f\x6c\x6f\x68h\x78"]="i\x64";${"\x47\x4cO\x42\x41\x4c\x53"}["sn\x63\x75\x66\x6c\x6f\x68"]="qa\x75ti\x74y";${"\x47L\x4f\x42\x41\x4c\x53"}["w\x6awx\x78\x61\x73\x74\x6f\x63n"]="\x69\x64";${"G\x4cOBA\x4cS"}["pka\x67\x66a\x6e\x6be\x62"]="\x69d";${${"\x47L\x4f\x42\x41\x4c\x53"}["s\x63\x6bb\x76\x77\x76\x6em\x65\x6c"]}=\app\models\Products::find()->where(["\x69\x64"=>${${"GL\x4f\x42A\x4cS"}["\x77\x73ts\x78\x62o\x6co\x68\x68\x78"]}])->one();${${"\x47\x4c\x4f\x42\x41L\x53"}["\x75o\x67\x72\x76\x62\x61\x68"]}=\app\models\Barcode::find()->where(["\x70\x72\x6fdu\x63\x74s\x5f\x69d"=>${${"\x47L\x4f\x42\x41LS"}["\x77j\x77\x78xas\x74\x6f\x63\x6e"]},"s\x74a\x74us"=>1])->all();if(${${"\x47\x4cO\x42A\x4cS"}["sn\x63\x75\x66\x6c\x6f\x68"]}>count(${${"\x47LOB\x41LS"}["u\x6fg\x72\x76b\x61\x68"]})){$product->qautity=${${"\x47\x4cO\x42\x41L\x53"}["\x64j\x79\x63j\x73s"]};$product->pricesale=number_format($product->pricesale,2);$product->pricebuy=number_format($product->pricebuy,2);$product->save();\Yii::$app->getSession()->setFlash("\x73\x75qtt",\Yii::t("ap\x70","ແກ້​ໄຂ​ຈຳ​ນວນ​ສີນ​ຄ້າ​ແລ້​ວ"));\Yii::$app->getSession()->setFlash("a\x63ti\x6fn",\Yii::t("\x61pp",""));}else{\Yii::$app->getSession()->setFlash("e\x72\x72\x6f\x72\x71\x74t",\Yii::t("\x61p\x70","ບໍ່​ສາ​ມາດ​ແກ້​ໄຂ​ຈຳ​ນວນ​ສີ້ນ​ຄ້າ​ໄດ້​\x2e.\x2e."));\Yii::$app->getSession()->setFlash("a\x63t\x69\x6fn",\Yii::t("\x61\x70p",""));}$feowqid="\x70ro\x64u\x63\x74";${${"GL\x4f\x42\x41L\x53"}["\x68r\x63\x73nf\x72\x76\x68\x6e"]}=\app\models\Barcode::find()->where(["\x70rodu\x63t\x73\x5fid"=>${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x70k\x61g\x66\x61\x6ek\x65\x62"]},"\x73\x74a\x74\x75\x73"=>1])->orderBy("\x69d \x44E\x53\x43")->all();\Yii::$app->session["\x71t"]=$product->qautity;return$this->renderAjax("\x76ie\x77",["mo\x64\x65\x6c"=>${$feowqid},"b\x61\x72co\x64\x65"=>${${"\x47\x4c\x4f\x42A\x4c\x53"}["\x68\x72\x63\x73\x6e\x66rv\x68\x6e"]}]);}return$this->renderAjax("\x71autity\x75\x70da\x74\x65",["q\x61u\x74\x69\x74\x79"=>${${"\x47\x4c\x4fB\x41\x4c\x53"}["djy\x63\x6a\x73\x73"]},"\x69\x64"=>${${"GL\x4f\x42\x41\x4c\x53"}["\x71m\x75o\x77\x74r\x6e"]}]);}public function actionQautityupdateindex($id=null,$qautity,$idp=null){${"\x47\x4cO\x42\x41\x4c\x53"}["\x68\x6bo\x77y\x66mu"]="\x69d\x70";if(!empty(${${"\x47LO\x42AL\x53"}["\x7ao\x69i\x72\x6c\x75"]})){${"\x47L\x4f\x42\x41LS"}["\x78s\x73\x6d\x79\x70"]="\x71au\x74\x69ty";${${"\x47\x4c\x4f\x42A\x4cS"}["s\x63\x6b\x62v\x77\x76\x6em\x65\x6c"]}=\app\models\Products::find()->where(["\x69\x64"=>${${"GL\x4fBA\x4c\x53"}["\x7aoi\x69\x72l\x75"]}])->one();if((int)${${"\x47\x4c\x4f\x42\x41\x4cS"}["\x78\x73\x73\x6d\x79\x70"]}>0){$iivsspckj="q\x61u\x74it\x79";$product->qautity=(int)${$iivsspckj};$product->pricesale=number_format($product->pricesale,2);$product->pricebuy=number_format($product->pricebuy,2);$product->user_id=Yii::$app->session["\x75\x73er"]->id;$product->save();\Yii::$app->getSession()->setFlash("s\x75",\Yii::t("\x61\x70\x70","ແກ້​ໄຂ​ຈຳ​ນວນ​ສີນ​ຄ້າ​ແລ້​ວ"));\Yii::$app->getSession()->setFlash("\x61c\x74\x69\x6f\x6e",\Yii::t("a\x70\x70",""));}else{\Yii::$app->getSession()->setFlash("\x65r\x72\x6f\x72",\Yii::t("\x61\x70\x70","ບໍ່​ສາ​ມາດ​ແກ້​ໄຂ​ຈຳ​ນວນ​ສີ້ນ​ຄ້າ​ໄດ້​.\x2e.\x2e"));\Yii::$app->getSession()->setFlash("\x61c\x74ion",\Yii::t("\x61pp",""));}return"<\x64iv\x20id\x3dqt".$product->id."\x3e".Html::a($product->qautity,"#",["\x6f\x6ec\x6ci\x63\x6b"=>"\n\x20\x20 \x20\x20\x20   \x20         \x20\x20       \x20\x20 \x20\$.aj\x61x({\n   \x20\x20\x20\x20   \x20\x20 \x20 \x20\x20 \x20\x20 \x20  \x20\x20\x20 \x20   ty\x70e:\x27POS\x54\x27,\n\x20  \x20\x20\x20\x20\x20\x20\x20 \x20\x20 \x20\x20 \x20\x20 \x20\x20\x20\x20  \x20\x20    c\x61c\x68\x65: f\x61\x6c\x73\x65,\n\x20\x20\x20     \x20  \x20\x20 \x20\x20  \x20\x20  \x20\x20\x20     \x20\x20u\x72\x6c:\x27\x69\x6ed\x65\x78\x2e\x70h\x70?r\x3d\x70rod\x75\x63\x74\x73/qa\x75ti\x74\x79u\x70da\x74e\x69\x6edex&\x69\x64p=".$product->id."&\x71\x61\x75\x74\x69\x74\x79\x3d".$product->qautity."',\n \x20  \x20  \x20  \x20\x20\x20\x20\x20  \x20\x20\x20 \x20 \x20   \x20\x20 \x20\x20\x73u\x63c\x65ss:fu\x6e\x63\x74\x69o\x6e(re\x73\x70on\x73e)\x20{\n\x20\x20\x20 \x20  \x20       \x20 \x20 \x20\x20  \x20 \x20     \x20   \x20\$(\x27\x23\x71\x74".$product->id."\x27)\x2ehtm\x6c(re\x73p\x6f\x6es\x65)\x3b\n\x20   \x20\x20\x20 \x20\x20\x20     \x20\x20    \x20\x20\x20 \x20\x20    \x20 \x20\x20doc\x75m\x65\x6e\x74\x2eg\x65t\x45l\x65\x6d\x65\x6et\x42yI\x64(\x27s\x65a\x72ch\x27)\x2e\x66\x6f\x63\x75s()\x3b\n \x20\x20   \x20 \x20  \x20 \x20\x20\x20   \x20 \x20\x20 \x20 \x20\x20\x20  \x20}\n \x20    \x20  \x20\x20\x20  \x20\x20    \x20\x20\x20 \x20\x20  \x20\x20  });\x72\x65\x74urn \x66\x61l\x73e\x3b","\x63\x6c\x61\x73s"=>"\x62t\x6e \x62tn-\x73m \x62\x67-l\x69\x6ek",])."</div\x3e";}return$this->renderAjax("\x71\x61ut\x69\x74y\x75pd\x61t\x65i\x6e\x64\x65x",["\x71\x61\x75tity"=>${${"G\x4c\x4f\x42\x41\x4cS"}["\x64jy\x63\x6a\x73s"]},"\x69\x64"=>${${"G\x4cOB\x41L\x53"}["\x68ko\x77\x79f\x6d\x75"]}]);}public function actionDelete($id){$tzjtbutwgskx="\x69\x64";$this->findModel(${$tzjtbutwgskx})->delete();return$this->redirect(["\x69n\x64ex"]);}protected function findModel($id){${"GL\x4fB\x41\x4c\x53"}["\x62\x76u\x75\x76\x76\x75"]="\x69d";$cpdqlksa="m\x6f\x64e\x6c";if((${$cpdqlksa}=Products::findOne(${${"G\x4c\x4fB\x41\x4c\x53"}["bvu\x75\x76\x76\x75"]}))!==null){return${${"\x47\x4c\x4f\x42A\x4c\x53"}["\x75\x6e\x74\x78k\x63"]};}else{throw new NotFoundHttpException("Th\x65 req\x75e\x73\x74\x65\x64\x20\x70a\x67e\x20\x64oes \x6e\x6f\x74 \x65x\x69\x73t.");}}public function actionRepaortsale(){if(isset($_GET["\x69n\x76oi\x63e_co\x64e"])||isset($_GET["\x64\x61te"])){$tjijncqcpjp="\x69n\x76\x6f\x69\x63e\x73";if(isset($_GET["i\x6e\x76oice\x5f\x63\x6f\x64e"])){if(Yii::$app->session["\x75\x73\x65\x72"]->user_type=="P\x4f\x53"){${${"\x47\x4c\x4f\x42\x41L\x53"}["\x75c\x6el\x79k\x79\x78\x71s"]}=\app\models\Invoice::find()->where(["\x75\x73\x65r_\x69d"=>Yii::$app->session["us\x65\x72"]->id,"co\x64e"=>$_GET["\x69\x6ev\x6f\x69\x63\x65_cod\x65"]])->orderBy("id\x20\x44\x45SC")->all();if(empty(${${"\x47\x4c\x4f\x42A\x4cS"}["\x75\x63\x6e\x6c\x79\x6b\x79\x78\x71\x73"]})&&empty($_GET["in\x76o\x69\x63\x65_c\x6f\x64\x65"])){$ycfrgzqng="\x69n\x76\x6f\x69\x63e\x73";${$ycfrgzqng}=\app\models\Invoice::find()->where(["\x75\x73\x65r\x5fi\x64"=>Yii::$app->session["\x75\x73er"]->id])->orderBy("i\x64\x20DES\x43")->all();}}else{${${"G\x4c\x4f\x42\x41L\x53"}["\x75c\x6e\x6c\x79\x6b\x79x\x71\x73"]}=\app\models\Invoice::find()->where(["co\x64\x65"=>$_GET["i\x6evo\x69c\x65_code"]])->orderBy("\x69\x64\x20\x44\x45S\x43")->all();$odouuqaea="\x69\x6e\x76o\x69\x63\x65s";if(empty(${$odouuqaea})&&empty($_GET["\x69n\x76o\x69ce_c\x6fde"])){${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x75c\x6el\x79\x6byx\x71\x73"]}=\app\models\Invoice::find()->orderBy("i\x64 \x44E\x53\x43")->all();}}}elseif(isset($_GET["dat\x65"])){if(Yii::$app->session["\x75se\x72"]->user_type=="P\x4f\x53"){${${"\x47\x4c\x4fB\x41L\x53"}["\x75\x63\x6e\x6c\x79\x6b\x79xq\x73"]}=\app\models\Invoice::find()->where(["\x75s\x65\x72_\x69\x64"=>Yii::$app->session["user"]->id,"dat\x65"=>$_GET["\x64ate"]])->orderBy("i\x64 DESC")->all();if(empty(${${"G\x4c\x4fBAL\x53"}["\x75cnl\x79\x6b\x79\x78q\x73"]})&&empty($_GET["\x64\x61te"])){$tcyxlyt="\x69\x6e\x76oi\x63\x65s";${$tcyxlyt}=\app\models\Invoice::find()->where(["\x75\x73\x65\x72_\x69\x64"=>Yii::$app->session["u\x73e\x72"]->id])->orderBy("\x69\x64\x20DE\x53\x43")->all();}}else{${"\x47LOB\x41\x4cS"}["\x64t\x6d\x72\x62r\x74\x67\x77\x71\x69q"]="\x69\x6ev\x6f\x69c\x65\x73";${"G\x4c\x4f\x42\x41\x4c\x53"}["\x70c\x71ysb\x65\x76"]="i\x6e\x76oice\x73";${${"G\x4c\x4fBA\x4cS"}["\x64\x74\x6dr\x62r\x74\x67\x77\x71\x69\x71"]}=\app\models\Invoice::find()->where(["\x64at\x65"=>$_GET["\x64ate"]])->orderBy("id\x20\x44\x45SC")->all();if(empty(${${"\x47L\x4fB\x41\x4c\x53"}["pc\x71\x79\x73b\x65v"]})&&empty($_GET["\x64\x61te"])){${"\x47\x4cO\x42\x41LS"}["\x6bx\x62\x72\x72\x64\x65"]="\x69\x6ev\x6f\x69\x63\x65\x73";${${"\x47\x4c\x4f\x42A\x4c\x53"}["\x6bx\x62r\x72de"]}=\app\models\Invoice::find()->orderBy("\x69\x64 DESC")->all();}}}return$this->renderAjax("\x72\x65\x70\x6fr\x74\x73ale",["i\x6ev\x6f\x69\x63\x65s"=>${$tjijncqcpjp},"inv\x6fi\x63\x65_c\x6f\x64e"=>@$_GET["\x69\x6ev\x6fic\x65_\x63\x6fd\x65"],"\x64\x61te"=>@$_GET["da\x74\x65"]]);}else{${"\x47\x4c\x4fB\x41L\x53"}["\x75\x69udr\x6a\x71bm\x73\x70"]="\x69\x6e\x76o\x69\x63e\x73";if(Yii::$app->session["u\x73\x65r"]->user_type=="PO\x53"){$fkbbtpt="i\x6e\x76\x6fi\x63\x65\x73";${$fkbbtpt}=\app\models\Invoice::find()->where(["us\x65r_\x69d"=>Yii::$app->session["u\x73\x65\x72"]->id])->orderBy("id\x20\x44\x45SC")->all();}else{${${"\x47L\x4f\x42AL\x53"}["u\x63\x6elyky\x78\x71\x73"]}=\app\models\Invoice::find()->orderBy("\x69d DES\x43")->all();}return$this->render("r\x65p\x6f\x72ts\x61\x6c\x65",["i\x6e\x76\x6fi\x63\x65\x73"=>${${"\x47L\x4f\x42A\x4cS"}["u\x69\x75\x64rjq\x62\x6d\x73\x70"]},"\x69\x6ev\x6f\x69\x63e\x5fcode"=>"","\x64at\x65"=>""]);}}public function actionProduct(){${"\x47\x4cO\x42\x41LS"}["\x72\x6e\x70ur\x6f\x79e"]="\x6d\x6f\x64\x65l";${"GLO\x42\x41\x4c\x53"}["\x70\x6d\x6a\x76\x62\x69\x78c\x70i"]="m\x6fde\x6c";${${"GL\x4fB\x41L\x53"}["\x72\x6e\x70u\x72o\x79e"]}=Products::find()->where(["\x6eot\x20\x69n","\x71a\x75tit\x79",[0]])->all();return$this->render("\x70\x72\x6f\x64u\x63t",["mod\x65\x6c"=>${${"\x47\x4c\x4f\x42A\x4cS"}["\x70mj\x76\x62\x69x\x63p\x69"]}]);}public function actionProductfinish(){${"\x47\x4c\x4f\x42\x41\x4cS"}["k\x6a\x74t\x71dvc\x70"]="\x6d\x6fd\x65\x6c";${${"\x47LO\x42\x41\x4c\x53"}["\x6bj\x74\x74\x71\x64v\x63p"]}=Products::find()->where(["i\x6e","\x71au\x74it\x79",[0]])->all();return$this->render("\x70r\x6fdu\x63\x74finish",["\x6d\x6fd\x65\x6c"=>${${"\x47\x4c\x4fB\x41L\x53"}["\x75ntx\x6b\x63"]}]);}public function actionRepsaleornot(){${${"\x47\x4c\x4fBAL\x53"}["\x75\x6e\x74\x78\x6b\x63"]}=Products::find()->orderBy("\x63\x6f\x64\x65\x20\x41S\x43")->all();return$this->render("re\x70\x73\x61\x6ce\x6fr\x6e\x6ft",["\x6d\x6f\x64\x65l"=>${${"G\x4cO\x42AL\x53"}["unt\x78\x6bc"]}]);}public function actionGbarcode(){return$this->render("g\x62\x61\x72\x63\x6f\x64\x65");}public function actionSearchpd(){${"G\x4c\x4fB\x41\x4cS"}["\x71\x65\x76i\x75\x64\x6c\x68l\x64v"]="m\x6fd\x65\x6c";if(isset($_GET["\x73\x65a\x72cht\x78t"])&&!empty($_GET["\x73\x65a\x72c\x68\x74x\x74"])){${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x75nt\x78\x6b\x63"]}=Products::find()->where("n\x61\x6de\x20\x6ci\x6b\x65 '%".$_GET["se\x61r\x63h\x74\x78\x74"]."%\x27 ")->all();}else{${${"G\x4cO\x42\x41\x4c\x53"}["u\x6e\x74x\x6b\x63"]}=Products::find()->orderBy("\x69d AS\x43")->all();}return$this->renderAjax("po\x73\x5f\x70\x72\x6f",["mo\x64e\x6c"=>${${"\x47\x4cO\x42\x41\x4cS"}["\x71ev\x69u\x64\x6c\x68\x6c\x64v"]}]);}public function actionGbcode($id){$gqdmigaynny="\x62arcode";$jjnqvr="\x69\x64";${"G\x4c\x4f\x42ALS"}["p\x63wl\x65\x76\x68\x6e\x73u\x65"]="\x69\x64";${${"\x47L\x4f\x42\x41LS"}["\x73\x63\x6bb\x76\x77vnm\x65\x6c"]}=Products::find()->where(["\x69\x64"=>${${"\x47\x4cO\x42AL\x53"}["p\x63w\x6c\x65v\x68\x6e\x73ue"]}])->one();${"G\x4c\x4f\x42\x41\x4c\x53"}["\x69\x78\x7a\x65j\x64\x6ca\x6f\x77\x62"]="\x63\x6f\x75\x6et";$cwopfrddmjj="\x63\x6f\x75nt";${"\x47\x4c\x4fB\x41\x4cS"}["\x69\x6di\x74\x63\x69\x78s\x68\x74\x77l"]="\x69\x64";${$gqdmigaynny}=\app\models\Barcode::find()->where(["\x70r\x6f\x64\x75c\x74\x73\x5f\x69\x64"=>${$jjnqvr},"sta\x74u\x73"=>1])->all();${${"\x47\x4c\x4fB\x41LS"}["i\x78\x7ae\x6a\x64l\x61o\x77\x62"]}=$product->qautity-count(${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x75o\x67\x72\x76\x62\x61\x68"]});if(${$cwopfrddmjj}>0){$jctrihgpjhem="\x63\x6f\x75n\x74";${"G\x4c\x4f\x42\x41\x4cS"}["bxu\x6a\x64\x66\x63k\x64p\x66"]="i";$gfnaywqbgi="\x69";${"G\x4c\x4f\x42A\x4cS"}["\x6b\x64\x66b\x74\x63"]="i";for(${$gfnaywqbgi}=1;${${"G\x4c\x4f\x42\x41L\x53"}["\x6b\x64\x66\x62t\x63"]}<=${$jctrihgpjhem};${${"\x47\x4cO\x42\x41\x4c\x53"}["\x62x\x75\x6a\x64f\x63k\x64\x70\x66"]}++){$vrqhdjhpog="n\x75m\x62\x65r\x31";${"G\x4cO\x42\x41\x4cS"}["\x65\x63\x6d\x67\x71\x74\x79\x64\x6f\x6b"]="\x6eu\x6d\x62\x65\x72";${${"\x47\x4c\x4f\x42\x41\x4cS"}["lin\x72\x65\x6d\x74\x76"]}=new\app\models\Barcode();${"\x47\x4c\x4f\x42A\x4c\x53"}["\x64d\x68\x79\x66v"]="\x6e\x75m\x62\x65\x72\x31";${${"G\x4c\x4fB\x41\x4cS"}["\x65\x63m\x67q\x74y\x64o\x6b"]}=rand(000000000,999999999);${$vrqhdjhpog}=rand(999,222);${${"\x47L\x4fB\x41\x4cS"}["a\x7an\x72\x78v\x63o"]}=${${"\x47\x4cO\x42\x41\x4c\x53"}["d\x64\x68yfv"]}.str_pad(${${"\x47\x4cO\x42\x41\x4c\x53"}["l\x69cr\x74\x66\x6a"]},9,"0",STR_PAD_LEFT);$bcode->products_id=${${"\x47\x4cO\x42\x41\x4c\x53"}["\x7a\x6fii\x72\x6c\x75"]};$bcode->status=1;$bcode->barcode=${${"G\x4c\x4fB\x41\x4c\x53"}["a\x7an\x72\x78\x76c\x6f"]};$bcode->save();}}return$this->redirect(["\x70\x72\x6f\x64u\x63\x74s/\x76\x69ew","\x69\x64"=>${${"\x47\x4c\x4fBAL\x53"}["i\x6ditcixs\x68\x74w\x6c"]}]);}public function actionDiscount(){if(isset($_GET["\x64\x73c"])){\Yii::$app->session["d\x69sc\x6fu\x6et"]=$_GET["\x64\x73\x63"];return$this->renderAjax("\x64is\x63\x6f\x75\x6e\x74",["\x64i\x73\x63ou\x6et"=>$_GET["ds\x63"]]);}else{return$this->renderAjax("\x64\x69\x73\x63o\x75\x6et");}}public function actionDashbord(){return$this->render("d\x61s\x68\x62or\x64");}}
?>